import { createRequestHandler } from "@remix-run/cloudflare-workers";
import { createRequest } from "node-fetch";

addEventListener("fetch", (event) => {
  event.respondWith(handleRequest(event.request));
});

async function handleRequest(request) {
  const response = await createRequestHandler({
    getLoadContext,
    handleRequest: createRequest,
  })(request);

  return response;
}

async function getLoadContext(request) {
  return {
    request,
  };
}
